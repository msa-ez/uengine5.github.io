{"hash":"390f0263d8dad24b58e378c1319715b17c17b37e","data":{"markdownPage":{"id":"1a804470b7e0710b09f756a64d5b80d2","title":"uEngine3.x 에서 uEngine5 로의 마이그래이션","description":"","path":"/uengine/writing-content/","timeToRead":2,"content":"<h1 id=\"uengine3x-에서-uengine5-로의-마이그래이션\"><a href=\"#uengine3x-%EC%97%90%EC%84%9C-uengine5-%EB%A1%9C%EC%9D%98-%EB%A7%88%EC%9D%B4%EA%B7%B8%EB%9E%98%EC%9D%B4%EC%85%98\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>uEngine3.x 에서 uEngine5 로의 마이그래이션</h1>\n<h3>Migrating uEngine 3 or 4 Process Definitions to uEngine5</h3>\n<ul>\n<li><strong>Using the migrator</strong></li>\n</ul>\n<pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>uengine<span class=\"token punctuation\">.</span>migrator</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>uengine<span class=\"token punctuation\">.</span>components<span class=\"token punctuation\">.</span>serializers</span><span class=\"token punctuation\">.</span><span class=\"token class-name\">ActivityRepositoryConverter</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>uengine<span class=\"token punctuation\">.</span>kernel</span><span class=\"token punctuation\">.</span>*<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>uengine<span class=\"token punctuation\">.</span>kernel<span class=\"token punctuation\">.</span>bpmn</span><span class=\"token punctuation\">.</span><span class=\"token class-name\">CallActivity</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>uengine<span class=\"token punctuation\">.</span>modeling<span class=\"token punctuation\">.</span>resource</span><span class=\"token punctuation\">.</span><span class=\"token class-name\">Serializer</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>uengine<span class=\"token punctuation\">.</span>processpublisher</span><span class=\"token punctuation\">.</span><span class=\"token class-name\">MigUtils</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>uengine<span class=\"token punctuation\">.</span>processpublisher<span class=\"token punctuation\">.</span>uengine3<span class=\"token punctuation\">.</span>importer</span><span class=\"token punctuation\">.</span><span class=\"token class-name\">ProcessDefinitionAdapter</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>uengine<span class=\"token punctuation\">.</span>util</span><span class=\"token punctuation\">.</span><span class=\"token class-name\">ActivityFor</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>uengine<span class=\"token punctuation\">.</span>util</span><span class=\"token punctuation\">.</span><span class=\"token class-name\">UEngineUtil</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>io</span><span class=\"token punctuation\">.</span>*<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util</span><span class=\"token punctuation\">.</span><span class=\"token class-name\">Hashtable</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token doc-comment comment\">/**\n * Created by uengine on 2017. 6. 16..\n */</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">UEngine3Converter</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> args<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span> <span class=\"token punctuation\">{</span>\n\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>args<span class=\"token punctuation\">.</span>length <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> args <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">{</span><span class=\"token string\">\"example.3upd\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">FileInputStream</span> inputFileStream <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FileInputStream</span><span class=\"token punctuation\">(</span>args<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">ByteArrayOutputStream</span> bao <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ByteArrayOutputStream</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token class-name\">UEngineUtil</span><span class=\"token punctuation\">.</span><span class=\"token function\">copyStream</span><span class=\"token punctuation\">(</span>inputFileStream<span class=\"token punctuation\">,</span> bao<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token class-name\">String</span> inputString <span class=\"token operator\">=</span> bao<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">//LGD 추가</span>\n        inputString <span class=\"token operator\">=</span> inputString<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"org.uengine.kernel.OCAPProcessDefinition\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"org.uengine.kernel.ProcessDefinition\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        inputString <span class=\"token operator\">=</span> inputString<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"org.uengine.kernel.EndActivity\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"org.uengine.kernel.DefaultActivity\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        inputString <span class=\"token operator\">=</span> inputString<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"com.lgdisplay.activity.OCAPBackActivity\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"org.uengine.kernel.DefaultActivity\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        inputString <span class=\"token operator\">=</span> inputString<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"org.uengine.kernel.ActivityRepository\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"java.util.ArrayList\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        inputString <span class=\"token operator\">=</span> inputString<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"kitech.apr.activity.KitechHumanActivity\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"org.uengine.kernel.HumanActivity\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        inputString <span class=\"token operator\">=</span> inputString<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">SubProcessActivity</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">CallActivity</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token class-name\">ProcessDefinition</span> processDefinition3 <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">ProcessDefinition</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">Serializer</span><span class=\"token punctuation\">.</span><span class=\"token function\">deserialize</span><span class=\"token punctuation\">(</span>inputString<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n         <span class=\"token comment\">//set max tracing tag value</span>\n        <span class=\"token class-name\">MigUtils</span><span class=\"token punctuation\">.</span><span class=\"token function\">setMaxTracingTag</span><span class=\"token punctuation\">(</span>processDefinition3<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token class-name\">ProcessDefinitionAdapter</span> processDefinitionAdapter <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ProcessDefinitionAdapter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token class-name\">Hashtable</span> hashtable <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Hashtable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        processDefinitionAdapter<span class=\"token punctuation\">.</span><span class=\"token function\">convert</span><span class=\"token punctuation\">(</span>processDefinition3<span class=\"token punctuation\">,</span> hashtable<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token class-name\">ProcessDefinition</span> processDefinition5 <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">ProcessDefinition</span><span class=\"token punctuation\">)</span> hashtable<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"root\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token class-name\">Serializer</span><span class=\"token punctuation\">.</span><span class=\"token function\">serialize</span><span class=\"token punctuation\">(</span>processDefinition5<span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FileOutputStream</span><span class=\"token punctuation\">(</span>args<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token operator\">+</span><span class=\"token string\">\".5.process\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<pre class=\"language-text\"><code class=\"language-text\">java org.uengine.migrator.UEngine3Converter uengine3.process</code></pre>\n<ul>\n<li>Then, you can get uengine3.process.5.process for the converted version of input file.</li>\n</ul>\n<h3>기존 uEngine 3.x 대의 프로세스 정의 모델 (블록 기반) 을 이해하고 싶다면 다음을 참고</h3>\n<div style = \"height:400px; object-fit: cover;\">\n<iframe style = \"width:100%; height:100%;\" src=\"https://www.youtube.com/embed/pjzQtRa7nNQ\" title=\"YouTube video player\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe>\n</div>\n<br><br>\n<div style = \"height:400px; object-fit: cover;\">\n<iframe style = \"width:100%; height:100%;\" src=\"https://www.youtube.com/embed/mGJ8CAnzc6Q\" title=\"YouTube video player\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe>\n</div>\n<p><br><br></p>\n<h3>신규 uEngine5 의 프로세스 정의 모델 (그래프 기반) 을 이해하고 싶다면 다음을 참고</h3>\n<div style = \"height:400px; object-fit: cover;\">\n<iframe style = \"width:100%; height:100%;\" src=\"https://www.facebook.com/plugins/video.php?height=420&href=https%3A%2F%2Fwww.facebook.com%2F1401720840%2Fvideos%2F10204571371469880%2F&show_text=false&width=560&t=0\" width=\"560\" height=\"420\" style=\"border:none;overflow:hidden\" scrolling=\"no\" frameborder=\"0\" allowfullscreen=\"true\" allow=\"autoplay; clipboard-write; encrypted-media; picture-in-picture; web-share\" allowFullScreen=\"true\"></iframe>\n</div>\n","sidebar":"uengine","next":"","prev":"","headings":[{"depth":1,"value":"uEngine3.x 에서 uEngine5 로의 마이그래이션","anchor":"#uengine3x-에서-uengine5-로의-마이그래이션"}]},"allMarkdownPage":{"edges":[{"node":{"path":"/uengine/sidebar/","title":"uEngine5 API Reference"}},{"node":{"path":"/uengine/installation/","title":"새로운 액티비티 타입 만들기"}},{"node":{"path":"/uengine/writing-content/","title":"uEngine3.x 에서 uEngine5 로의 마이그래이션"}},{"node":{"path":"/uengine/","title":"uEngine5 기반 프로젝트 만들기"}},{"node":{"path":"/uengine/deploying/","title":"uEngine5 트랜잭션 리스너"}},{"node":{"path":"/group/settings/","title":"Facebook group"}}]}},"context":{}}