---
description: ''
sidebar: 'getting-started'
---

# 테이블 정의

## 개요

uEngine6 BPM은 JPA(Java Persistence API)를 사용하고 있으며, 해당 문서에서는 각 테이블에 대한 DDL과 테이블에 대한 설명, 컬럼에 대한 설명을 포함한다.

## bpm_audit
### DDL
<details>
  <summary>bpm_audit DDL 문 보기</summary>

  ```sql
create table bpm_audit (
    audit_id bigint not null,
    activity_name varchar(255),
    finished_date timestamp,
    full_tracing_tag varchar(255),
    started_date timestamp,
    tracing_tag varchar(255),
    inst_id bigint,
    root_inst_id bigint,
    primary key (audit_id)
)
  ```

</details>

### 테이블 설명
??
### 컬럼 설명
| 컬럼명           | 설명               |
|------------------|--------------------|
| audit_id         | 심사 ID            |
| activity_name    | 활동 이름          |
| finished_date    | 종료 날짜          |
| full_tracing_tag | 전체 TracingTag     |
| started_date     | 시작 날짜          |
| tracing_tag      | TracingTag          |
| inst_id          | 인스턴스 ID        |
| root_inst_id     | 루트 인스턴스 ID   |

## BPM_EVENT_MAPPING
### DDL
<details>
  <summary>BPM_EVENT_MAPPING DDL 문 보기</summary>

  ```sql
create table bpm_event_mapping (
    event_type varchar(255) not null,
    correlation_key varchar(255),
    definition_id varchar(255),
    is_start_event boolean,
    tracing_tag varchar(255),
    primary key (event_type)
)

  ```

</details>

### 테이블 설명
BPM_EVENT_MAPPING 테이블은 Message Event 형식의 연동을 위한 테이블 입니다.  
해당하는 Correlation Key의 값이 Message(Kafka 등)로 들어오면, 해당하는 Definition의 Event가 실행됩니다.
StartEvent의 경우, 해당 Process가 실행됩니다.

### 컬럼 설명
| 컬럼명         | 설명               |
|----------------|--------------------|
| event_type     | 해당 Event의 Type        |
| correlation_key| 해당 Event를 호출 할 Correlation key       |
| definition_id  | Process Definition ID            |
| is_start_event | Process를 시작하는 StartEvent인지 여부   |
| tracing_tag    | 해당 Event의 TracingTag |

## DEF_INFO
### DDL
<details>
  <summary>DEF_INFO DDL 문 보기</summary>

  ```sql
create table def_info (
    id bigint generated by default as identity,
    name varchar(255),
    path varchar(255),
    primary key (id)
)
  ```

</details>

### 테이블 설명
DEF_INFO 테이블은 저장 된 Process Definition의 정보를 저장하는 테이블 입니다.
해당 Process Definition의 이름과, 경로가 저장됩니다.

### 컬럼 설명
| 컬럼명 | 설명       |
|--------|------------|
| id     | ID         |
| name   | 이름       |
| path   | 경로       |

## BPM_PROCINST
### DDL
<details>
  <summary>BPM_PROCINST DDL 문 보기</summary>

  ```sql
create table bpm_procinst (
    inst_id bigint not null,
    abs_trc_path varchar(255),
    adhoc boolean not null,
    archive boolean not null,
    corr_key varchar(255),
    curr_ep varchar(255),
    curr_rs_nm varchar(255),
    def_id varchar(255),
    def_mod_date timestamp,
    def_name varchar(255),
    def_path varchar(255),
    def_ver_id varchar(255),
    deleted boolean not null,
    dont_return boolean not null,
    due_date timestamp,
    event_handler boolean not null,
    ext1 varchar(255),
    ext2 varchar(255),
    ext3 varchar(255),
    ext4 varchar(255),
    ext5 varchar(255),
    finished_date timestamp,
    info varchar(255),
    init_com_cd varchar(255),
    init_ep varchar(255),
    init_rs_nm varchar(255),
    main_act_trc_tag varchar(255),
    main_def_ver_id bigint,
    main_exec_scope varchar(255),
    main_inst_id bigint,
    mod_date timestamp,
    name varchar(255),
    prev_curr_ep varchar(255),
    prev_curr_rs_nm varchar(255),
    root_inst_id bigint,
    started_date timestamp,
    status varchar(255),
    sub_process boolean not null,
    var_lob blob,
    primary key (inst_id)
)

alter table bpm_audit 
    add constraint FKmo0pohecdt6f9pnnemd8prk2i 
    foreign key (inst_id) 
    references bpm_procinst

alter table bpm_audit 
       add constraint FK1kt3f2n0lrlkbxn9vi6qg04e1 
       foreign key (root_inst_id) 
       references bpm_procinst

alter table bpm_rolemapping 
    add constraint FKm4x9jsj019xifwwsxgs2k0v5g 
    foreign key (inst_id) 
    references bpm_procinst

alter table bpm_worklist 
       add constraint FKaqi1kkbo7h5jm9xos18coda52 
       foreign key (process_instance_inst_id) 
       references bpm_procinst
  ```

</details>

### 테이블 설명

### 컬럼 설명
| 컬럼명           | 설명               |
|------------------|--------------------|
| inst_id          | 인스턴스 ID        |
| abs_trc_path     | ???     |
| adhoc            | 임시 여부          |
| archive          | 아카이브 여부      |
| corr_key         | 상관 관계 키       |
| curr_ep          | 현재 엔드포인트    |
| curr_rs_nm       | 현재 자원 이름     |
| def_id           | Process Definition ID            |
| def_mod_date     | Process Definition 수정 날짜     |
| def_name         | Process Definition 이름          |
| def_path         | Process Definition 경로          |
| def_ver_id       | Process Definition 버전 ID       |
| deleted          | 삭제 여부          |
| dont_return      | 반환하지 않음 여부 |
| due_date         | 마감일             |
| event_handler    | 이벤트 핸들러 여부 |
| ext1             | 확장 필드 1        |
| ext2             | 확장 필드 2        |
| ext3             | 확장 필드 3        |
| ext4             | 확장 필드 4        |
| ext5             | 확장 필드 5        |
| finished_date    | 인스턴스 종료 날짜          |
| info             | 인스턴스 정보               |
| init_com_cd      | 실행 회사 코드     |
| init_ep          | 실행 엔드포인트    |
| init_rs_nm       | 실행 리소스 네임     |
| main_act_trc_tag | ?? |
| main_def_ver_id  | 메인 Process Definition 버전 ID  |
| main_exec_scope  | 메인 ExecutionScope     |
| main_inst_id     | 메인 인스턴스 ID   |
| mod_date         | 수정 날짜          |
| name             | 인스턴스 명               |
| prev_curr_ep     | 이전 엔드포인트|
| prev_curr_rs_nm  | 이전 리소스 네임|
| root_inst_id     | 루트 인스턴스 ID   |
| started_date     | 인스턴스 시작 날짜          |
| status           | 인스턴스 상태               |
| sub_process      | 서브 프로세스 여부 |
| var_lob          | Lob 변수     |

## BPM_ROLEMAPPING
### DDL
<details>
  <summary>BPM_ROLEMAPPING DDL 문 보기</summary>

  ```sql
create table bpm_rolemapping (
    role_mapping_id bigint not null,
    assign_param1 varchar(255),
    assign_type binary(255),
    dispatch_option binary(255),
    dispatch_param1 varchar(255),
    endpoint varchar(255),
    group_id varchar(255),
    res_name varchar(255),
    role_name varchar(255),
    value varchar(255),
    inst_id bigint,
    primary key (role_mapping_id)
)
  ```

</details>

### 테이블 설명
BPM_ROLEMAPPING 테이블은 Role Mapping 정보를 저장하는 테이블입니다.
유저에 대한 정보들을 담고있습니다.
-- 현재 미사용

### 컬럼 설명
| 컬럼명        | 설명               |
|---------------|--------------------|
| role_mapping_id | 역할 매핑 ID     |
| assign_param1 | 할당 매개변수 1    |
| assign_type   | 할당 유형          |
| dispatch_option | 디스패치 옵션    |
| dispatch_param1 | 디스패치 매개변수 1|
| endpoint      | 엔드포인트         |
| group_id      | 그룹 ID            |
| res_name      | 자원 이름          |
| role_name     | 역할 이름          |
| value         | 값                 |
| inst_id       | 인스턴스 ID        |

## BPM_SERIVCE
### DDL
<details>
  <summary>BPM_SERIVCE DDL 문 보기</summary>

  ```sql
create table bpm_service (
    path varchar(255) not null,
    primary key (path)
);

create table service_endpoint_entity_events (
    service_endpoint_entity_path varchar(255) not null,
    correlation_key varchar(255),
    def_id varchar(255),
    message_class varchar(255)
);

alter table service_endpoint_entity_events 
    add constraint FK3xyfy1sgwva7kudl6owp0vmpk 
    foreign key (service_endpoint_entity_path) 
    references bpm_service;

  ```

</details>

### 테이블 설명

bpm_service 테이블은 서비스의 경로를 저장하는 테이블입니다.
service_endpoint_entity_events 테이블은 서비스 엔드포인트 엔티티의 이벤트를 저장하는 테이블입니다.

### 컬럼 설명

| 컬럼명                     | 설명                                           |
|----------------------------|------------------------------------------------|
| path                       | 서비스의 경로를 나타냅니다.                    |
| service_endpoint_entity_path | 호출 될 엔드포인트 경로를 나타냅니다.          |
| correlation_key            | path로 보낼 correlation_key에 대한 정보를 나타냅니다. |
| def_id                     | 해당 row를 사용 할, Process Definition의 ID를 의미합니다. |
| message_class              | 실행하는 Event의 Type을 의미합니다.            |

## BPM_WORKLIST
### DDL
<details>
  <summary>BPM_WORKLIST DDL 문 보기</summary>

  ```sql
create table bpm_worklist (
    task_id bigint not null,
    abs_trc_tag varchar(255),
    act_type varchar(255),
    def_id varchar(255),
    def_name varchar(255),
    def_ver_id varchar(255),
    delegated boolean,
    description varchar(255),
    dispatch_option integer not null,
    dispatch_param1 varchar(255),
    due_date date,
    end_date date,
    endpoint varchar(255),
    exec_scope varchar(255),
    ext1 varchar(255),
    ext2 varchar(255),
    ext3 varchar(255),
    ext4 varchar(255),
    ext5 varchar(255),
    inst_id bigint,
    parameter varchar(255),
    prev_user_name varchar(255),
    priority binary(255),
    read_date date,
    ref_role_name varchar(255),
    res_name varchar(255),
    role_name varchar(255),
    root_inst_id binary(255),
    save_date date,
    start_date date,
    status varchar(255),
    title varchar(255),
    tool varchar(255),
    trc_tag varchar(255),
    urget boolean,
    process_instance_inst_id bigint,
    primary key (task_id)
)
  ```
</details>

### 테이블 설명
BPM_WORKLIST 테이블은 업무 목록 정보를 저장하는 테이블입니다.

### 컬럼 설명
| 컬럼명 | 설명 |
|--------|------|
| task_id | 작업 ID |
| abs_trc_tag | 절대 추적 태그 |
| act_type | 활동 유형 |
| def_id | 정의 ID |
| def_name | 정의 이름 |
| def_ver_id | 정의 버전 ID |
| delegated | 위임 여부 |
| description | 설명 |
| dispatch_option | 디스패치 옵션 |
| dispatch_param1 | 디스패치 매개변수 1 |
| due_date | 마감일 |
| end_date | 종료일 |
| endpoint | 엔드포인트 |
| exec_scope | 실행 범위 |
| ext1 | 확장 필드 1 |
| ext2 | 확장 필드 2 |
| ext3 | 확장 필드 3 |
| ext4 | 확장 필드 4 |
| ext5 | 확장 필드 5 |
| inst_id | 인스턴스 ID |
| parameter | 매개변수 |
| prev_user_name | 이전 사용자 이름 |
| priority | 우선 순위 |
| read_date | 읽은 날짜 |
| ref_role_name | 참조 역할 이름 |
| res_name | 자원 이름 |
| role_name | 역할 이름 |
| root_inst_id | 루트 인스턴스 ID |
| save_date | 저장 날짜 |
| start_date | 시작 날짜 |
| status | 상태 |
| title | 제목 |
| tool | 도구 |
| trc_tag | 추적 태그 |
| urget | 긴급 여부 |
| process_instance_inst_id | 프로세스 인스턴스 ID |